---
title: 操作系统原理-存储模型1
date: 2017-09-25 15:23:30
tags: 
- 摘录
categories: 
- 操作系统
- 操作系统原理
---

__目录__

<!-- toc -->
<!--more-->

# 基本概念-地址重定位（RELOCATION）

## 概念回顾

程序装载到内存才可以运行。通常，程序以可执行文件格式保存在磁盘上

多道程序设计模型，允许多个程序同时进入内存

每个进程有自己的地址空间
* 一个进程执行时不能访问另一个进程的地址空间
* 进程不能执行不适合的操作

## 要解决的问题

如何在同一个内存空间中，同时运行多个进程。

![fig1](/images/操作系统原理-存储模型1/fig1.jpg)
![fig2](/images/操作系统原理-存储模型1/fig2.jpg)

## 地址重定位

__逻辑地址（相对地址，虚拟地址）__
* 用户程序经过编译、汇编后形成目标代码，目标代码通常采用相对地址的形式，其首地址为0，其余地址都相对于首地址而编址
* 不能用逻辑地址在内存中读取信息

__物理地址（绝对地址，实地址）__
内存中存储单元的地址 可直接寻址

__为了保证CPU执行指令时可正确访问内存单元，需要将用户程序中的逻辑地址转换为运行时可由机器直接寻址的物理地址，这一过程称为地址重定位__

## 静态重定位与动态重定位

静态重定位：当用户程序加载到内存时，一次性实现逻辑地址到物理地址的转换。一般可以由软件完成

动态重定位：在进程执行过程中进行地址变换 → → 即逐条指令执行时完成地址转换。需要硬件部件支持

动态重定位实现方式如下
![fig3](/images/操作系统原理-存储模型1/fig3.jpg)

# 物理内存管理

## 空闲内存管理

__数据结构__
1. 位图
    * 每个分配单元对应于位图中的一位，0表示空闲，1表示占用（或者相反）
1. 空闲区表、已分配区表
    * 表中每一项记录了空闲区（或已分配区）的起始地址、长度、标志
1. 空闲块链表

## 内存分配算法

常用的内存分配算法有：

1. 首次适配 first fit
    * 在空闲区表中找到第一个满足进程要求的空闲区
1. 下次适配 next fit
    * 从上次找到的空闲区处接着查找
1. 最佳适配 best fit
    * 查找整个空闲区表，找到能够满足进程要求的最小空闲区
1. 最差适配 worst fit
    * 总是分配满足进程要求的最大空闲区

# 伙伴系统 BUDDY SYSTEM

# 1 参考

__本篇博客摘录、整理自以下博文。若存在版权侵犯，请及时联系博主(邮箱：liuyehcf@163.com)，博主将在第一时间删除__

* 《MOOC-操作系统原理-陈向群》
