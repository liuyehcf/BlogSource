---
title: Go-基础
date: 2019-01-14 18:52:47
tags: 
- 原创
categories: 
- Go
- Basic
---

__阅读更多__

<!--more-->

# 1 基本概念

## 1.1 包

包是结构化代码的一种方式：每个程序都由包（通常简称为`pkg`）的概念组成，可以使用自身的包或者从其它包中导入内容。

如同其它一些编程语言中的类库或命名空间的概念，每个`Go`文件都`属于且仅属于`一个包。一个包可以由许多以`.go`为扩展名的源文件组成，因此文件名和包名一般来说都是不相同的。

你必须在源文件中非注释的第一行指明这个文件属于哪个包，如：`package main`。`package main`表示一个可独立执行的程序，每个`Go`应用程序都包含一个名为`main`的包。

一个应用程序可以包含不同的包，而且即使你只使用`main`包也不必把所有的代码都写在一个巨大的文件里：你可以用一些较小的文件，并且在每个文件非注释的第一行都使用`package main`来指明这些文件都属于`main`包。如果你打算编译包名不是为`main`的源文件，如`pack1`，编译后产生的对象文件将会是`pack1.a`而不是可执行程序。另外要注意的是，所有的包名都应该使用小写字母。

## 1.2 可见性规则

当标识符（包括常量、变量、类型、函数名、结构字段等等）以一个大写字母开头，如：Group1，那么使用这种形式的标识符的对象就可以被外部包的代码所使用（客户端程序需要先导入这个包），这被称为导出（像面向对象语言中的`public`）；标识符如果以小写字母开头，则对包外是不可见的，但是他们在整个包的内部是可见并且可用的（像面向对象语言中的`private`）。

（大写字母可以使用任何`Unicode`编码的字符，比如希腊文，不仅仅是`ASCII`码中的大写字母）。

因此，在导入一个外部包后，能够且只能够访问该包中导出的对象。

假设在包`pack1`中我们有一个变量或函数叫做`Thing`（以`T`开头，所以它能够被导出），那么在当前包中导入`pack1`包，`Thing`就可以像面向对象语言那样使用点标记来调用：`pack1.Thing`（__`pack1`在这里是不可以省略的__）。

因此包也可以作为命名空间使用，帮助避免命名冲突（名称冲突）：两个包中的同名变量的区别在于他们的包名，例如`pack1.Thing`和`pack2.Thing`。

你可以通过使用包的别名来解决包名之间的名称冲突，或者说根据你的个人喜好对包名进行重新设置，如：`import fm "fmt"`。下面的代码展示了如何使用包的别名：

```go
package main

import fm "fmt" // alias3

func main() {
   fm.Println("hello, world")
}
```

# 2 Tips

## 2.1 值类型与引用类型

1. `int`、`float`、`bool`、`array`、`struct`是值类型
1. `slice`、`map`、`func`、`method`、`chan`、`interface`、`string`是引用类型

## 2.2 数组与切片

1. 数组是固定大小的 `[<n>]Type`
1. 引用是可变的（可理解为动态数组）`[]Type`

## 2.3 类型转换

`Type(v)`

## 2.4 字符串拼接

`fmt.Sprintf`

## 2.5 各种类型转为字符串

`fmt.Sprintf`

## 2.6 交叉编译

```sh
# 查看环境变量
go env

# 编译指定cpuArch的二进制
env GOOS=linux GOARCH=amd64 go build -o <target_binary> <src.go> 
```

## 2.7 类似try...catch

1. `panic`：抛出异常
1. `defer`&`recover`：捕获异常

# 3 IDE-Goland

__工程结构__

1. bin
1. pkg
1. src

# 4 参考

* [go中包的概念、导入与可见性](https://studygolang.com/articles/7165)
* [Go语言入门教程，Golang入门教程（非常详细）](http://c.biancheng.net/golang/)
* [Go log 日志](https://www.jianshu.com/p/d634316a9487)
