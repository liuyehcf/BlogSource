---
title: 编译原理-中间代码生成1
date: 2017-11-12 09:36:13
mathjax: true
tags: 
- 摘录
categories: 
- 编译
---

__目录__

<!-- toc -->
<!--more-->

# 1 类型表达式

1. __基本类型是类型表达式__
    * $integer$
    * $real$
    * $char$
    * $boolean$
    * $type\\_error$(出错类型)
    * $void$(无类型)
1. __可以为类型表达式命名，类型名也是类型表达式__
1. __将类型构造符(type constructor)作用于类型表达式可以构成新的类型表达式__
    * __数组构造符$array$__：若$T$是类型表达式，则$array(I, T)$是类型表达式($I$是一个整数)
    * __指针构造符$pointer$__：若$T$是类型表达式，则$pointer(T)$是类型表达式，它表示一个指针类型
    * __笛卡尔乘积构造符__：若$T_1$和$T_2$是类型表达式，则笛卡尔乘积$T_1 \times T_2$是类型表达式
    * __函数构造符$\to$__：若$T_1、T_2、...、T_n$和$R$是类型表达式，则$T_1 \times T_2 \times ... \times T_n \to R$是类型表达式
    * __记录构造符$record$__：若有标识符$N_1、N_2、...、N_n$与类型表达式$T_1、T_2、...、T_n$，则$record((N_1 \times T_1) \times (N_2 \times T_2) \times ... \times (N_n \times T_n))$是一个类型表达式

例如，有C程序片段

```C
struct stype
{
    char[8] name;
    int score;
};
stype[50] table;
stype* p;
```

* 和$stype$绑定的类型表达式：$record((name \times array(8, char)) \times (score \times integer))$
* 和$table$绑定的类型表达式：$array(50, stype)$
* 和$p$绑定的类型表达式：$pointer (stype)$

# 2 声明语句的翻译

对于声明语句，语义分析的主要任务就是收集标识符的__类型等属性信息__，并为每一个名字分配一个__相对地址__

* 从类型表达式可以知道该类型在运行时刻所需的存储单元数量称为__类型的宽度(width)__
* 在__编译时刻__，可以使用类型的宽度为每一个名字分配一个__相对地址__

名字的类型和相对地址信息保存在相应的符号表记录中

![fig1](/images/编译原理-中间代码生成1/fig1.jpg)

该文法是一个$LL(1)$文法（对于每个输入符号，$SELECT集唯一$），因此可以用自顶向下分析法，下面是两个例子

采用最左推导完全展开后，请以树的后续遍历为顺序阅读各节点的属性计算

![fig2](/images/编译原理-中间代码生成1/fig2.jpg)

![fig3](/images/编译原理-中间代码生成1/fig3.jpg)

# 3 参考

__本篇博客摘录、整理自以下博文。若存在版权侵犯，请及时联系博主(邮箱：liuyehcf#163.com，#替换成@)，博主将在第一时间删除__

* 《MOOC-编译原理-陈鄞》
