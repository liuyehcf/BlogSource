---
title: 数据库优化策略
date: 2017-09-02 11:18:54
tags: 
- 摘录
categories: 
- 数据库
- 基本概念
---

__目录__

<!-- toc -->
<!--more-->

# 1 索引

索引是提高数据库性能的常用方法

创建索引时的注意事项

1. 表的主键、外键必须有索引
1. 数据量超过300的表应该有索引
1. 经常与其他表进行连接的表，在连接字段上应该建立索引
1. 经常出现在Where子句中的字段，特别是大表的字段，应该建立索引
1. 索引应该建在选择性高的字段上
1. 索引应该建在小字段上，对于大的文本字段甚至超长字段，不要建索引
    * 正确选择复合索引中的主列字段，一般是选择性较好的字段
    * 复合索引的几个字段是否经常同时以AND方式出现在Where子句中？单字段查询是否极少甚至没有？如果是，则可以建立复合索引；否则考虑单字段索引
    * 如果复合索引中包含的字段经常单独出现在Where子句中，则分解为多个单字段索引
    * 如果复合索引所包含的字段超过3个，那么仔细考虑其必要性，考虑减少复合的字段
    * 如果既有单字段索引，又有这几个字段上的复合索引，一般可以删除复合索引
1. 频繁进行数据操作的表，不要建立太多的索引
1. 删除无用的索引，避免对执行计划造成负面影响；
1. 复合索引的建立需要进行仔细分析，尽量考虑用单字段索引代替

# 2 分页优化

MySQL的LIMIT工作原理就是先读取n条记录，然后抛弃前n条，读m条想要的，所以n越大，性能会越差。

```
SELECT * FROM crm_user INNER JOIN (SELECT id FROM crm_user LIMIT 1000,10) AS a  USING(id);

SELECT * FROM crm_user INNER JOIN (SELECT id FROM crm_user LIMIT 1000,10) AS a  ON crm_user.id = a.id;
```

# 3 数据库分表

{% post_link 数据库分表策略 %}

# 4 尽量不使用NULL字段

MySQL难以优化引用可空列查询，它会使索引、索引统计和值更加复杂。可空列需要更多的存储空间，还需要MySQL内部进行特殊处理。可空列被索引后，每条记录都需要一个额外的字节，还能导致MyISAM中固定大小的索引变成可变大小的索引

# 5 参考

__本篇博客摘录、整理自以下博文。若存在版权侵犯，请及时联系博主(邮箱：liuyehcf@163.com)，博主将在第一时间删除__

* [MySQL的几种优化方法](http://blog.csdn.net/u013474436/article/details/49908683)
